BITNET
*IDENT BITNET
*/
*/  MOD TO IMPROVE BITNET INTERFACE
*/
*/  THIS MOD CAUSES CLASS *M* FILES TO BE ROUTED TO THE WAIT
*/  QUEUE WITH A FORMS CODE OF *ML*.  IT ALSO PREVENTS DSP FROM
*/  ATTEMPTING TO VALIDATE DESTINATION USER NAMES AND PASSWORDS.
*/
*/  THIS MOD ALSO IMPROVES DSP ERROR RECOVERY.  IT TREATS INVALID
*/  OWNER/CREATOR AS A REASON FOR CONSIDERING AN UPLINE FILE TO BE
*/  MAIL. 
*/
*/      K. E. JORDAN   3/1/85 
*/
*DECK COMYODT
*/
*/  CHANGE COMYODT SO THAT BITNET FILES ARE NOT HELD
*/
*DELETE 153
          FALSE,                     # *BITNET* MESSAGE #
*EDIT COMYODT
*/
*/  END OF COMYODT MOD
*/
*DECK UDPDEP
*INSERT 67
*CALL COMYMSC
*DELETE 225,226
      # REROUTE FILE AS A BITNET MAIL FILE #
  
      DSP$FLG2[0] = DSP$FLG2[0] LOR FRDC$ LOR FRFC$;
      DSP$XFL2[0] = DSP$XFL2[0] LOR EFNV$ LOR EFOU$ LOR EFCU$;
      DSP$DIS[0] = "WT";
      DSP$FCI[0] = "ML";
      DSP$OFN[0] = MAILFAM;
      DSP$OUN[0] = MAILUSR;
      DSP$CFN[0] = DSP$OFN[0];
      DSP$CUN[0] = DSP$OUN[0];
      DSP$R16[0] = O"377772"; 
*DELETE 256
      # REROUTE FILE AS A BITNET MAIL FILE #
  
      DSP$FLG2[0] = DSP$FLG2[0] LOR FRDC$ LOR FRFC$;
      DSP$XFL2[0] = DSP$XFL2[0] LOR EFNV$ LOR EFOU$ LOR EFCU$;
      DSP$DIS[0] = "WT";
      DSP$FCI[0] = "ML";
      DSP$OFN[0] = MAILFAM;
      DSP$OUN[0] = MAILUSR;
      DSP$CFN[0] = DSP$OFN[0];
      DSP$CUN[0] = DSP$OUN[0];
      DSP$R16[0] = O"377772"; 
*DELETE 261
      # REROUTE FILE AS A BITNET MAIL FILE #
  
      DSP$FLG2[0] = DSP$FLG2[0] LOR FRDC$ LOR FRFC$;
      DSP$XFL2[0] = DSP$XFL2[0] LOR EFNV$ LOR EFOU$ LOR EFCU$;
      DSP$DIS[0] = "WT";
      DSP$FCI[0] = "ML";
      DSP$OFN[0] = MAILFAM;
      DSP$OUN[0] = MAILUSR;
      DSP$CFN[0] = DSP$OFN[0];
      DSP$CUN[0] = DSP$OUN[0];
      DSP$R16[0] = O"377772"; 
*DECK UDPFDB
*INSERT 90
*CALL COMYMSC
*INSERT 201
  
        IF USS$OCL[0] EQ "M" AND NOT USS$PSO[0]
        THEN                         # SET BITNET CHARACTERISTICS #
          BEGIN
          DSP$FLG2[0] = DSP$FLG2[0] LOR FRFC$;
          DSP$XFL2[0] = DSP$XFL2[0] LOR EFNV$ LOR EFOU$ LOR EFCU$;
          DSP$DIS[0]  = "WT"; 
          DSP$FCI[0]  = "ML"; 
          DSP$OFN[0]  = MAILFAM;
          DSP$OUN[0]  = MAILUSR;
          DSP$CFN[0]  = DSP$OFN[0];
          DSP$CUN[0]  = DSP$OUN[0];
          DSP$R16[0]  = O"377772";
          END
  
       IF USS$OCL[0] EQ "N" AND NOT USS$PSO[0]
       THEN
         BEGIN
         DSP$FLG2[0] = DSP$FLG2[0] LOR FRFC$;
         DSP$XFL2[0] = DSP$XFL2[0] LOR EFNV$ LOR EFOU$ LOR EFCU$;
         DSP$DIS[0] = "WT";
         DSP$FCI[0] = "BF";
         DSP$OFN[0] = MAILFAM;
         DSP$OUN[0] = MAILUSR;
         DSP$CFN[0] = DSP$OFN[0];
         DSP$CUN[0] = DSP$OUN[0];
         DSP$R16[0] = O"377772";
         END
